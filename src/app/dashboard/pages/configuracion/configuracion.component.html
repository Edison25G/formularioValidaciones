<p-toast></p-toast>

<div class="w-full sm:w-[700px] bg-white p-6 rounded-xl shadow-2xl mx-auto">
	<h2 class="text-2xl font-bold mb-6 text-center">Configuraci칩n de Cuenta</h2>

	<div class="flex flex-col items-center mb-6">
		<ng-container *ngIf="user.foto; else noFoto">
			<img [src]="user.foto" alt="Foto de perfil" class="w-32 h-32 rounded-full object-cover mb-4" />
		</ng-container>

		<ng-template #noFoto>
			<div class="w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center mb-4">
				<i class="pi pi-user text-5xl text-gray-500"></i>
			</div>
		</ng-template>

		<p-fileUpload
			name="foto"
			[auto]="true"
			chooseLabel="Cambiar foto"
			mode="basic"
			(onSelect)="onFotoCambiada($event)"
			accept="image/*"
			class="w-full sm:w-[250px]"
		></p-fileUpload>
	</div>

	<form class="space-y-4" (ngSubmit)="guardarCambios()">
		<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
			<div>
				<span>Nombre de usuario</span>
				<input type="text" pInputText [(ngModel)]="user.username" name="username" class="w-full" />
			</div>
			<div>
				<span>Correo electr칩nico</span>
				<input type="email" pInputText [(ngModel)]="user.email" name="email" class="w-full" />
			</div>
		</div>

		<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
			<div>
				<span>Contrase침a actual</span>
				<input type="password" pInputText [(ngModel)]="user.password" name="password" class="w-full" disabled />
			</div>
			<div>
				<span>Nueva contrase침a</span>
				<input type="password" pInputText [(ngModel)]="user.nuevaPassword" name="nuevaPassword" class="w-full" />
			</div>
		</div>

		<div class="flex justify-end pt-4">
			<p-button
				type="button"
				label="Cancelar"
				icon="pi pi-times"
				class="p-button-secondary"
				(click)="cancelarCambios()"
			></p-button>
			<p-button
				type="submit"
				label="Guardar Cambios"
				icon="pi pi-save"
				class="p-button-success"
				[disabled]="loading"
			></p-button>
		</div>
	</form>
</div>
